{"ast":null,"code":"import _asyncToGenerator from \"D:\\\\JAVA\\\\FeiraOnline\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTable } from '@angular/material/table';\nimport { ShopTableDataSource } from './shop-table-datasource';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../../../auth/product/product.service\";\nimport * as i2 from \"./../../../auth/cart/cart.service\";\nimport * as i3 from \"@angular/material/table\";\nimport * as i4 from \"@angular/material/sort\";\nimport * as i5 from \"@angular/material/paginator\";\nimport * as i6 from \"../cart/cart.component\";\nimport * as i7 from \"@angular/material/icon\";\n\nfunction ShopTableComponent_th_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 16);\n    i0.ɵɵtext(1, \"Name\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ShopTableComponent_td_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r11 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(row_r11.name);\n  }\n}\n\nfunction ShopTableComponent_th_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 16);\n    i0.ɵɵtext(1, \"Pre\\u00E7o\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ShopTableComponent_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r12 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(row_r12.price);\n  }\n}\n\nfunction ShopTableComponent_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \"Quantidade\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ShopTableComponent_td_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 17);\n    i0.ɵɵelementStart(1, \"div\", 19);\n    i0.ɵɵelementStart(2, \"mat-icon\", 20);\n    i0.ɵɵlistener(\"click\", function ShopTableComponent_td_12_Template_mat_icon_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const row_r13 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.plusQnt(row_r13);\n    });\n    i0.ɵɵtext(3, \" add_circle_outline \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 21);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"mat-icon\", 22);\n    i0.ɵɵlistener(\"click\", function ShopTableComponent_td_12_Template_mat_icon_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const row_r13 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.minusQnt(row_r13);\n    });\n    i0.ɵɵtext(7, \" remove_circle_outline \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r13 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", row_r13.qntBuy, \" \");\n  }\n}\n\nfunction ShopTableComponent_th_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 18);\n  }\n}\n\nfunction ShopTableComponent_td_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 17);\n    i0.ɵɵelementStart(1, \"div\", 23);\n    i0.ɵɵelementStart(2, \"mat-icon\", 20);\n    i0.ɵɵlistener(\"click\", function ShopTableComponent_td_15_Template_mat_icon_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const row_r17 = restoredCtx.$implicit;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.addShopping(row_r17);\n    });\n    i0.ɵɵtext(3, \"add_shopping_cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ShopTableComponent_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 24);\n  }\n}\n\nfunction ShopTableComponent_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 25);\n  }\n}\n\nconst _c0 = function () {\n  return [5, 10, 20];\n};\n\nexport class ShopTableComponent {\n  constructor(productService, cartService) {\n    this.productService = productService;\n    this.cartService = cartService;\n    this.displayedColumns = ['name', 'price', 'qntBuy', 'action'];\n  }\n\n  ngAfterViewInit() {\n    this.loadDataWithDelay(5000); // adicionado para evitar queda do mock backend     \n  }\n\n  loadDataWithDelay(ms) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield new Promise(done => setTimeout(() => done(), ms));\n\n      _this.loadData();\n    })();\n  }\n\n  loadData() {\n    this.productService.read().subscribe({\n      next: products => {\n        this.dataSource = new ShopTableDataSource(products, this.cartService);\n        this.dataSource.sort = this.sort;\n        this.dataSource.paginator = this.paginator;\n        this.table.dataSource = this.dataSource;\n      },\n      error: erro => {\n        this.productService.handleError(\"Nao foi possivel carregar os produtos\", erro);\n      },\n      complete: () => {\n        this.removeInvalidProducts();\n      }\n    });\n  } // Remove do datasource os produtos que por ventura nao tenham \n  // preço cadastrado, ou que não tenham quantidade disponivel no estoque\n\n\n  removeInvalidProducts() {\n    this.dataSource.data.forEach((el, index) => {\n      if (el.qnt <= 0 || el.price <= 0) {\n        this.dataSource.data.splice(index, 1);\n      }\n    });\n  }\n\n  plusQnt(row) {\n    let newQnt = row.qntBuy + 1; // se for possivel adicionar \n    // baseado nos produtos em estoque\n\n    if (newQnt <= row.qnt) {\n      row.qntBuy = newQnt;\n      this.dataSource.updateItem(row);\n    } else {\n      this.cartService.showMessage(\"Nao foi possivel adicionar mais produtos (indisponibilidade em estoque)\");\n    }\n  }\n\n  minusQnt(row) {\n    let newQnt = row.qntBuy - 1;\n\n    if (newQnt >= 0) {\n      row.qntBuy = newQnt;\n      this.dataSource.updateItem(row);\n    }\n\n    if (row.qntBuy == 0) {\n      this.cartService.removeCart(row);\n    }\n  }\n\n  addShopping(row) {\n    console.log(\"adicionando\");\n\n    if (row.qntBuy > 0) {\n      this.cartService.addCart(row);\n    } else {\n      this.cartService.showMessage(\"Por gentileza selecionar a quantidade de produtos\");\n    }\n  }\n\n}\n\nShopTableComponent.ɵfac = function ShopTableComponent_Factory(t) {\n  return new (t || ShopTableComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.CartService));\n};\n\nShopTableComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ShopTableComponent,\n  selectors: [[\"app-shop-table\"]],\n  viewQuery: function ShopTableComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MatPaginator, 5);\n      i0.ɵɵviewQuery(MatSort, 5);\n      i0.ɵɵviewQuery(MatTable, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n    }\n  },\n  decls: 22,\n  vars: 7,\n  consts: [[1, \"container\"], [1, \"item\"], [1, \"mat-elevation-z8\"], [\"mat-table\", \"\", \"matSort\", \"\", \"aria-label\", \"Elements\", 1, \"full-width-table\"], [\"matColumnDef\", \"name\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"price\", 1, \"column\"], [\"matColumnDef\", \"qntBuy\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"action\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"aria-label\", \"Select page\", 3, \"length\", \"pageIndex\", \"pageSize\", \"pageSizeOptions\"], [\"paginator\", \"\"], [1, \"item1\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-cell\", \"\"], [1, \"changeQnt\"], [1, \"indigo-accent\", \"teste\", \"clickable\", 3, \"click\"], [1, \"qntBuy\"], [1, \"red\", \"changeQnt\", \"clickable\", 3, \"click\"], [1, \"teste\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n  template: function ShopTableComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"table\", 3);\n      i0.ɵɵelementContainerStart(4, 4);\n      i0.ɵɵtemplate(5, ShopTableComponent_th_5_Template, 2, 0, \"th\", 5);\n      i0.ɵɵtemplate(6, ShopTableComponent_td_6_Template, 2, 1, \"td\", 6);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(7, 7);\n      i0.ɵɵtemplate(8, ShopTableComponent_th_8_Template, 2, 0, \"th\", 5);\n      i0.ɵɵtemplate(9, ShopTableComponent_td_9_Template, 2, 1, \"td\", 6);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(10, 8);\n      i0.ɵɵtemplate(11, ShopTableComponent_th_11_Template, 2, 0, \"th\", 9);\n      i0.ɵɵtemplate(12, ShopTableComponent_td_12_Template, 8, 1, \"td\", 6);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(13, 10);\n      i0.ɵɵtemplate(14, ShopTableComponent_th_14_Template, 1, 0, \"th\", 9);\n      i0.ɵɵtemplate(15, ShopTableComponent_td_15_Template, 4, 0, \"td\", 6);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtemplate(16, ShopTableComponent_tr_16_Template, 1, 0, \"tr\", 11);\n      i0.ɵɵtemplate(17, ShopTableComponent_tr_17_Template, 1, 0, \"tr\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"mat-paginator\", 13, 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 15);\n      i0.ɵɵelement(21, \"app-cart\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"length\", ctx.dataSource == null ? null : ctx.dataSource.data == null ? null : ctx.dataSource.data.length)(\"pageIndex\", 0)(\"pageSize\", 10)(\"pageSizeOptions\", i0.ɵɵpureFunction0(6, _c0));\n    }\n  },\n  directives: [i3.MatTable, i4.MatSort, i3.MatColumnDef, i3.MatHeaderCellDef, i3.MatCellDef, i3.MatHeaderRowDef, i3.MatRowDef, i5.MatPaginator, i6.CartComponent, i3.MatHeaderCell, i4.MatSortHeader, i3.MatCell, i7.MatIcon, i3.MatHeaderRow, i3.MatRow],\n  styles: [\".container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: flex-start;\\n  align-items: flex-start;\\n  align-content: space-around;  \\n  max-height: 80vh;\\n} \\n\\n.item[_ngcontent-%COMP%] {  \\n  width: 50%;\\n  max-width: 600px;\\n  max-height: calc(100vh - 134px);\\n  min-width: 300px; \\n} \\n\\n.item1[_ngcontent-%COMP%] {\\n  width: 300px;\\n  height: 200px;\\n  margin-left: 20px;   \\n} \\n\\n.full-width-table[_ngcontent-%COMP%] {\\n  width: 100%;  \\n} \\n\\n.changeQnt[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  width: 20px;\\n} \\n\\n.clickable[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n} \\n\\n.qntBuy[_ngcontent-%COMP%]{\\n  \\n  width: auto;\\n  font-weight: 500;\\n  margin-left: 50%;\\n  margin-right: 30%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNob3AtdGFibGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7RUFDYiwyQkFBMkI7RUFDM0IsdUJBQXVCO0VBQ3ZCLDJCQUEyQjtFQUMzQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsZ0JBQWdCO0VBQ2hCLCtCQUErQjtFQUMvQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLFdBQVc7QUFDYjs7QUFHQTtFQUNFLGFBQWE7RUFDYiw4QkFBOEI7RUFDOUIsbUJBQW1CO0VBQ25CLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7O0VBRUUsV0FBVztFQUNYLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsaUJBQWlCO0FBQ25CIiwiZmlsZSI6InNob3AtdGFibGUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICBhbGlnbi1jb250ZW50OiBzcGFjZS1hcm91bmQ7ICBcbiAgbWF4LWhlaWdodDogODB2aDtcbn0gXG5cbi5pdGVtIHsgIFxuICB3aWR0aDogNTAlO1xuICBtYXgtd2lkdGg6IDYwMHB4O1xuICBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMTM0cHgpO1xuICBtaW4td2lkdGg6IDMwMHB4OyBcbn1cblxuLml0ZW0xIHtcbiAgd2lkdGg6IDMwMHB4O1xuICBoZWlnaHQ6IDIwMHB4O1xuICBtYXJnaW4tbGVmdDogMjBweDsgICBcbn1cblxuLmZ1bGwtd2lkdGgtdGFibGUge1xuICB3aWR0aDogMTAwJTsgIFxufSBcblxuXG4uY2hhbmdlUW50IHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICB3aWR0aDogMjBweDtcbn1cblxuLmNsaWNrYWJsZSB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnFudEJ1eXtcbiAgXG4gIHdpZHRoOiBhdXRvO1xuICBmb250LXdlaWdodDogNTAwO1xuICBtYXJnaW4tbGVmdDogNTAlO1xuICBtYXJnaW4tcmlnaHQ6IDMwJTtcbn1cbiJdfQ== */\"]\n});","map":{"version":3,"sources":["D:/JAVA/FeiraOnline/frontend/src/app/components/shop/shop-table/shop-table.component.ts"],"names":["MatPaginator","MatSort","MatTable","ShopTableDataSource","i0","i1","i2","i3","i4","i5","i6","i7","ShopTableComponent_th_5_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ShopTableComponent_td_6_Template","row_r11","$implicit","ɵɵadvance","ɵɵtextInterpolate","name","ShopTableComponent_th_8_Template","ShopTableComponent_td_9_Template","row_r12","price","ShopTableComponent_th_11_Template","ShopTableComponent_td_12_Template","_r15","ɵɵgetCurrentView","ɵɵlistener","ShopTableComponent_td_12_Template_mat_icon_click_2_listener","restoredCtx","ɵɵrestoreView","row_r13","ctx_r14","ɵɵnextContext","plusQnt","ShopTableComponent_td_12_Template_mat_icon_click_6_listener","ctx_r16","minusQnt","ɵɵtextInterpolate1","qntBuy","ShopTableComponent_th_14_Template","ɵɵelement","ShopTableComponent_td_15_Template","_r19","ShopTableComponent_td_15_Template_mat_icon_click_2_listener","row_r17","ctx_r18","addShopping","ShopTableComponent_tr_16_Template","ShopTableComponent_tr_17_Template","_c0","ShopTableComponent","constructor","productService","cartService","displayedColumns","ngAfterViewInit","loadDataWithDelay","ms","Promise","done","setTimeout","loadData","read","subscribe","next","products","dataSource","sort","paginator","table","error","erro","handleError","complete","removeInvalidProducts","data","forEach","el","index","qnt","splice","row","newQnt","updateItem","showMessage","removeCart","console","log","addCart","ɵfac","ShopTableComponent_Factory","t","ɵɵdirectiveInject","ProductService","CartService","ɵcmp","ɵɵdefineComponent","type","selectors","viewQuery","ShopTableComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","decls","vars","consts","template","ShopTableComponent_Template","ɵɵelementContainerStart","ɵɵtemplate","ɵɵelementContainerEnd","ɵɵproperty","length","ɵɵpureFunction0","directives","MatColumnDef","MatHeaderCellDef","MatCellDef","MatHeaderRowDef","MatRowDef","CartComponent","MatHeaderCell","MatSortHeader","MatCell","MatIcon","MatHeaderRow","MatRow","styles"],"mappings":"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","sourcesContent":["import { MatPaginator } from '@angular/material/paginator';\r\nimport { MatSort } from '@angular/material/sort';\r\nimport { MatTable } from '@angular/material/table';\r\nimport { ShopTableDataSource } from './shop-table-datasource';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"./../../../auth/product/product.service\";\r\nimport * as i2 from \"./../../../auth/cart/cart.service\";\r\nimport * as i3 from \"@angular/material/table\";\r\nimport * as i4 from \"@angular/material/sort\";\r\nimport * as i5 from \"@angular/material/paginator\";\r\nimport * as i6 from \"../cart/cart.component\";\r\nimport * as i7 from \"@angular/material/icon\";\r\nfunction ShopTableComponent_th_5_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"th\", 16);\r\n    i0.ɵɵtext(1, \"Name\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction ShopTableComponent_td_6_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"td\", 17);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const row_r11 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(row_r11.name);\r\n} }\r\nfunction ShopTableComponent_th_8_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"th\", 16);\r\n    i0.ɵɵtext(1, \"Pre\\u00E7o\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction ShopTableComponent_td_9_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"td\", 17);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const row_r12 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(row_r12.price);\r\n} }\r\nfunction ShopTableComponent_th_11_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"th\", 18);\r\n    i0.ɵɵtext(1, \"Quantidade\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction ShopTableComponent_td_12_Template(rf, ctx) { if (rf & 1) {\r\n    const _r15 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"td\", 17);\r\n    i0.ɵɵelementStart(1, \"div\", 19);\r\n    i0.ɵɵelementStart(2, \"mat-icon\", 20);\r\n    i0.ɵɵlistener(\"click\", function ShopTableComponent_td_12_Template_mat_icon_click_2_listener() { const restoredCtx = i0.ɵɵrestoreView(_r15); const row_r13 = restoredCtx.$implicit; const ctx_r14 = i0.ɵɵnextContext(); return ctx_r14.plusQnt(row_r13); });\r\n    i0.ɵɵtext(3, \" add_circle_outline \");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(4, \"div\", 21);\r\n    i0.ɵɵtext(5);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(6, \"mat-icon\", 22);\r\n    i0.ɵɵlistener(\"click\", function ShopTableComponent_td_12_Template_mat_icon_click_6_listener() { const restoredCtx = i0.ɵɵrestoreView(_r15); const row_r13 = restoredCtx.$implicit; const ctx_r16 = i0.ɵɵnextContext(); return ctx_r16.minusQnt(row_r13); });\r\n    i0.ɵɵtext(7, \" remove_circle_outline \");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const row_r13 = ctx.$implicit;\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵtextInterpolate1(\" \", row_r13.qntBuy, \" \");\r\n} }\r\nfunction ShopTableComponent_th_14_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"th\", 18);\r\n} }\r\nfunction ShopTableComponent_td_15_Template(rf, ctx) { if (rf & 1) {\r\n    const _r19 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"td\", 17);\r\n    i0.ɵɵelementStart(1, \"div\", 23);\r\n    i0.ɵɵelementStart(2, \"mat-icon\", 20);\r\n    i0.ɵɵlistener(\"click\", function ShopTableComponent_td_15_Template_mat_icon_click_2_listener() { const restoredCtx = i0.ɵɵrestoreView(_r19); const row_r17 = restoredCtx.$implicit; const ctx_r18 = i0.ɵɵnextContext(); return ctx_r18.addShopping(row_r17); });\r\n    i0.ɵɵtext(3, \"add_shopping_cart\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction ShopTableComponent_tr_16_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"tr\", 24);\r\n} }\r\nfunction ShopTableComponent_tr_17_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"tr\", 25);\r\n} }\r\nconst _c0 = function () { return [5, 10, 20]; };\r\nexport class ShopTableComponent {\r\n    constructor(productService, cartService) {\r\n        this.productService = productService;\r\n        this.cartService = cartService;\r\n        this.displayedColumns = ['name', 'price', 'qntBuy', 'action'];\r\n    }\r\n    ngAfterViewInit() {\r\n        this.loadDataWithDelay(5000); // adicionado para evitar queda do mock backend     \r\n    }\r\n    async loadDataWithDelay(ms) {\r\n        await new Promise(done => setTimeout(() => done(), ms));\r\n        this.loadData();\r\n    }\r\n    loadData() {\r\n        this.productService.read().subscribe({\r\n            next: (products) => {\r\n                this.dataSource = new ShopTableDataSource(products, this.cartService);\r\n                this.dataSource.sort = this.sort;\r\n                this.dataSource.paginator = this.paginator;\r\n                this.table.dataSource = this.dataSource;\r\n            },\r\n            error: (erro) => {\r\n                this.productService.handleError(\"Nao foi possivel carregar os produtos\", erro);\r\n            },\r\n            complete: () => {\r\n                this.removeInvalidProducts();\r\n            }\r\n        });\r\n    }\r\n    // Remove do datasource os produtos que por ventura nao tenham \r\n    // preço cadastrado, ou que não tenham quantidade disponivel no estoque\r\n    removeInvalidProducts() {\r\n        this.dataSource.data.forEach((el, index) => {\r\n            if (el.qnt <= 0 || el.price <= 0) {\r\n                this.dataSource.data.splice(index, 1);\r\n            }\r\n        });\r\n    }\r\n    plusQnt(row) {\r\n        let newQnt = row.qntBuy + 1;\r\n        // se for possivel adicionar \r\n        // baseado nos produtos em estoque\r\n        if (newQnt <= row.qnt) {\r\n            row.qntBuy = newQnt;\r\n            this.dataSource.updateItem(row);\r\n        }\r\n        else {\r\n            this.cartService.showMessage(\"Nao foi possivel adicionar mais produtos (indisponibilidade em estoque)\");\r\n        }\r\n    }\r\n    minusQnt(row) {\r\n        let newQnt = row.qntBuy - 1;\r\n        if (newQnt >= 0) {\r\n            row.qntBuy = newQnt;\r\n            this.dataSource.updateItem(row);\r\n        }\r\n        if (row.qntBuy == 0) {\r\n            this.cartService.removeCart(row);\r\n        }\r\n    }\r\n    addShopping(row) {\r\n        console.log(\"adicionando\");\r\n        if (row.qntBuy > 0) {\r\n            this.cartService.addCart(row);\r\n        }\r\n        else {\r\n            this.cartService.showMessage(\"Por gentileza selecionar a quantidade de produtos\");\r\n        }\r\n    }\r\n}\r\nShopTableComponent.ɵfac = function ShopTableComponent_Factory(t) { return new (t || ShopTableComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.CartService)); };\r\nShopTableComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ShopTableComponent, selectors: [[\"app-shop-table\"]], viewQuery: function ShopTableComponent_Query(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵviewQuery(MatPaginator, 5);\r\n        i0.ɵɵviewQuery(MatSort, 5);\r\n        i0.ɵɵviewQuery(MatTable, 5);\r\n    } if (rf & 2) {\r\n        let _t;\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\r\n    } }, decls: 22, vars: 7, consts: [[1, \"container\"], [1, \"item\"], [1, \"mat-elevation-z8\"], [\"mat-table\", \"\", \"matSort\", \"\", \"aria-label\", \"Elements\", 1, \"full-width-table\"], [\"matColumnDef\", \"name\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"price\", 1, \"column\"], [\"matColumnDef\", \"qntBuy\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"action\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"aria-label\", \"Select page\", 3, \"length\", \"pageIndex\", \"pageSize\", \"pageSizeOptions\"], [\"paginator\", \"\"], [1, \"item1\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-cell\", \"\"], [1, \"changeQnt\"], [1, \"indigo-accent\", \"teste\", \"clickable\", 3, \"click\"], [1, \"qntBuy\"], [1, \"red\", \"changeQnt\", \"clickable\", 3, \"click\"], [1, \"teste\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]], template: function ShopTableComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"div\", 2);\r\n        i0.ɵɵelementStart(3, \"table\", 3);\r\n        i0.ɵɵelementContainerStart(4, 4);\r\n        i0.ɵɵtemplate(5, ShopTableComponent_th_5_Template, 2, 0, \"th\", 5);\r\n        i0.ɵɵtemplate(6, ShopTableComponent_td_6_Template, 2, 1, \"td\", 6);\r\n        i0.ɵɵelementContainerEnd();\r\n        i0.ɵɵelementContainerStart(7, 7);\r\n        i0.ɵɵtemplate(8, ShopTableComponent_th_8_Template, 2, 0, \"th\", 5);\r\n        i0.ɵɵtemplate(9, ShopTableComponent_td_9_Template, 2, 1, \"td\", 6);\r\n        i0.ɵɵelementContainerEnd();\r\n        i0.ɵɵelementContainerStart(10, 8);\r\n        i0.ɵɵtemplate(11, ShopTableComponent_th_11_Template, 2, 0, \"th\", 9);\r\n        i0.ɵɵtemplate(12, ShopTableComponent_td_12_Template, 8, 1, \"td\", 6);\r\n        i0.ɵɵelementContainerEnd();\r\n        i0.ɵɵelementContainerStart(13, 10);\r\n        i0.ɵɵtemplate(14, ShopTableComponent_th_14_Template, 1, 0, \"th\", 9);\r\n        i0.ɵɵtemplate(15, ShopTableComponent_td_15_Template, 4, 0, \"td\", 6);\r\n        i0.ɵɵelementContainerEnd();\r\n        i0.ɵɵtemplate(16, ShopTableComponent_tr_16_Template, 1, 0, \"tr\", 11);\r\n        i0.ɵɵtemplate(17, ShopTableComponent_tr_17_Template, 1, 0, \"tr\", 12);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(18, \"mat-paginator\", 13, 14);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(20, \"div\", 15);\r\n        i0.ɵɵelement(21, \"app-cart\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(16);\r\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"length\", ctx.dataSource == null ? null : ctx.dataSource.data == null ? null : ctx.dataSource.data.length)(\"pageIndex\", 0)(\"pageSize\", 10)(\"pageSizeOptions\", i0.ɵɵpureFunction0(6, _c0));\r\n    } }, directives: [i3.MatTable, i4.MatSort, i3.MatColumnDef, i3.MatHeaderCellDef, i3.MatCellDef, i3.MatHeaderRowDef, i3.MatRowDef, i5.MatPaginator, i6.CartComponent, i3.MatHeaderCell, i4.MatSortHeader, i3.MatCell, i7.MatIcon, i3.MatHeaderRow, i3.MatRow], styles: [\".container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: flex-start;\\n  align-items: flex-start;\\n  align-content: space-around;  \\n  max-height: 80vh;\\n} \\n\\n.item[_ngcontent-%COMP%] {  \\n  width: 50%;\\n  max-width: 600px;\\n  max-height: calc(100vh - 134px);\\n  min-width: 300px; \\n} \\n\\n.item1[_ngcontent-%COMP%] {\\n  width: 300px;\\n  height: 200px;\\n  margin-left: 20px;   \\n} \\n\\n.full-width-table[_ngcontent-%COMP%] {\\n  width: 100%;  \\n} \\n\\n.changeQnt[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  width: 20px;\\n} \\n\\n.clickable[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n} \\n\\n.qntBuy[_ngcontent-%COMP%]{\\n  \\n  width: auto;\\n  font-weight: 500;\\n  margin-left: 50%;\\n  margin-right: 30%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNob3AtdGFibGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7RUFDYiwyQkFBMkI7RUFDM0IsdUJBQXVCO0VBQ3ZCLDJCQUEyQjtFQUMzQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsZ0JBQWdCO0VBQ2hCLCtCQUErQjtFQUMvQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLFdBQVc7QUFDYjs7QUFHQTtFQUNFLGFBQWE7RUFDYiw4QkFBOEI7RUFDOUIsbUJBQW1CO0VBQ25CLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7O0VBRUUsV0FBVztFQUNYLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsaUJBQWlCO0FBQ25CIiwiZmlsZSI6InNob3AtdGFibGUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICBhbGlnbi1jb250ZW50OiBzcGFjZS1hcm91bmQ7ICBcbiAgbWF4LWhlaWdodDogODB2aDtcbn0gXG5cbi5pdGVtIHsgIFxuICB3aWR0aDogNTAlO1xuICBtYXgtd2lkdGg6IDYwMHB4O1xuICBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMTM0cHgpO1xuICBtaW4td2lkdGg6IDMwMHB4OyBcbn1cblxuLml0ZW0xIHtcbiAgd2lkdGg6IDMwMHB4O1xuICBoZWlnaHQ6IDIwMHB4O1xuICBtYXJnaW4tbGVmdDogMjBweDsgICBcbn1cblxuLmZ1bGwtd2lkdGgtdGFibGUge1xuICB3aWR0aDogMTAwJTsgIFxufSBcblxuXG4uY2hhbmdlUW50IHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICB3aWR0aDogMjBweDtcbn1cblxuLmNsaWNrYWJsZSB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnFudEJ1eXtcbiAgXG4gIHdpZHRoOiBhdXRvO1xuICBmb250LXdlaWdodDogNTAwO1xuICBtYXJnaW4tbGVmdDogNTAlO1xuICBtYXJnaW4tcmlnaHQ6IDMwJTtcbn1cbiJdfQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}